<h2 mat-dialog-title>Course Registration</h2>
<form #form="ngForm" (ngSubmit)="onSubmit()">
    <mat-dialog-content class="flex flex-col space-y-4">
        <div>{{ student | studentName: StudentNameStyle.LAST_FIRST }}</div>
        @if (isCoursesLoaded$ | async) {
            <mat-form-field>
                <mat-label>Course</mat-label>
                <mat-select #courseId="ngModel" [(ngModel)]="vm.courseId" name="courseId" required>
                    <mat-option [value]="undefined">--</mat-option>
                    @for (course of courses$ | async; track course.id) {
                        <mat-option [value]="course.id">{{ course.name }}</mat-option>
                    }
                </mat-select>
                @if (courseId.errors) {
                    <mat-error>Field is required</mat-error>
                }
            </mat-form-field>
        } @else {
            <div class="flex flex-col items-center justify-center space-y-2">
                <mat-spinner diameter="50" />
                <span class="font-semibold">Loading courses...</span>
            </div>
        }
    </mat-dialog-content>
    <mat-dialog-actions>
        <button mat-button type="button" matDialogClose>Cancel</button>
        <button mat-flat-button type="submit" [disabled]="form.invalid">Submit</button>
    </mat-dialog-actions>
</form>
